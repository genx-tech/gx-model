{"version":3,"sources":["../../../src/lang/entityFeatures/atLeastOneNotNull.js"],"names":["FEATURE_NAME","feature","entity","fields","Error","Array","isArray","addFeature","once","forEach","fieldName","field","optional","module","exports"],"mappings":"AAAA;;;;AAEA,MAAMA,YAAY,GAAG,mBAArB;;AAYA,SAASC,OAAT,CAAiBC,MAAjB,EAAyB,CAAEC,MAAF,CAAzB,EAAqC;AACjC,MAAI,CAACA,MAAL,EAAa;AACT,UAAM,IAAIC,KAAJ,CAAU,sBAAV,CAAN;AACH;;AAEDC,EAAAA,KAAK,CAACC,OAAN,CAAcH,MAAd,MAA0BA,MAAM,GAAG,CAAEA,MAAF,CAAnC;AAEAD,EAAAA,MAAM,CAACK,UAAP,CAAkBP,YAAlB,EAAgCG,MAAhC,EAAwC,IAAxC,EAA8CK,IAA9C,CAAmD,mBAAnD,EAAwE,MAAM;AAC1EL,IAAAA,MAAM,CAACM,OAAP,CAAeC,SAAS,IAAI;AACxB,UAAIC,KAAK,GAAGT,MAAM,CAACC,MAAP,CAAcO,SAAd,CAAZ;;AAEA,UAAI,CAACC,KAAL,EAAY;AACR,cAAM,IAAIP,KAAJ,CAAU,qBAAqBM,SAArB,GAAiC,cAA3C,CAAN;AACH;;AAEDC,MAAAA,KAAK,CAACC,QAAN,GAAiB,IAAjB;AACH,KARD;AASH,GAVD;AAWH;;AAEDC,MAAM,CAACC,OAAP,GAAiBb,OAAjB","sourcesContent":["\"use strict\";\n\nconst FEATURE_NAME = 'atLeastOneNotNull';\n\n/**\n * A rule specifies at least one field not null, e.g. email or mobile.\n * @module EntityFeature_AtLeastOneNotNull\n */\n\n/**\n * Initialize the feature\n * @param {OolongEntity} entity - Entity to apply this feature\n * @param {array} fields - List of field names\n */\nfunction feature(entity, [ fields ]) {\n    if (!fields) {\n        throw new Error('Missing field names!');\n    }\n\n    Array.isArray(fields) || (fields = [ fields ]);\n\n    entity.addFeature(FEATURE_NAME, fields, true).once('afterAddingFields', () => {\n        fields.forEach(fieldName => {\n            let field = entity.fields[fieldName];\n\n            if (!field) {\n                throw new Error('Required field \"' + fieldName + '\" not exist.');\n            }\n\n            field.optional = true;\n        });\n    });\n}\n\nmodule.exports = feature;"],"file":"atLeastOneNotNull.js"}