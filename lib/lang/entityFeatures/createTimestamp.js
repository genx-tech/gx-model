"use strict";

require("source-map-support/register");

const FEATURE_NAME = 'createTimestamp';

function feature(entity, args = []) {
  let typeInfo = {
    name: 'createdAt',
    type: 'datetime',
    auto: true,
    readOnly: true,
    writeOnce: true
  };
  let [options] = args;

  if (options) {
    if (typeof options === 'string') {
      options = {
        name: options
      };
    }

    Object.assign(typeInfo, options);
  }

  let fieldName = typeInfo.name;
  entity.addFeature(FEATURE_NAME, {
    field: fieldName
  }).once('afterAddingFields', () => {
    entity.addField(fieldName, typeInfo);
  });
}

module.exports = feature;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9sYW5nL2VudGl0eUZlYXR1cmVzL2NyZWF0ZVRpbWVzdGFtcC5qcyJdLCJuYW1lcyI6WyJGRUFUVVJFX05BTUUiLCJmZWF0dXJlIiwiZW50aXR5IiwiYXJncyIsInR5cGVJbmZvIiwibmFtZSIsInR5cGUiLCJhdXRvIiwicmVhZE9ubHkiLCJ3cml0ZU9uY2UiLCJvcHRpb25zIiwiT2JqZWN0IiwiYXNzaWduIiwiZmllbGROYW1lIiwiYWRkRmVhdHVyZSIsImZpZWxkIiwib25jZSIsImFkZEZpZWxkIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7QUFFQSxNQUFNQSxZQUFZLEdBQUcsaUJBQXJCOztBQVlBLFNBQVNDLE9BQVQsQ0FBaUJDLE1BQWpCLEVBQXlCQyxJQUFJLEdBQUcsRUFBaEMsRUFBb0M7QUFDaEMsTUFBSUMsUUFBUSxHQUFHO0FBQ1hDLElBQUFBLElBQUksRUFBRSxXQURLO0FBRVhDLElBQUFBLElBQUksRUFBRSxVQUZLO0FBR1hDLElBQUFBLElBQUksRUFBRSxJQUhLO0FBSVhDLElBQUFBLFFBQVEsRUFBRSxJQUpDO0FBS1hDLElBQUFBLFNBQVMsRUFBRTtBQUxBLEdBQWY7QUFRQSxNQUFJLENBQUVDLE9BQUYsSUFBY1AsSUFBbEI7O0FBRUEsTUFBSU8sT0FBSixFQUFhO0FBQ1QsUUFBSSxPQUFPQSxPQUFQLEtBQW1CLFFBQXZCLEVBQWlDO0FBQzdCQSxNQUFBQSxPQUFPLEdBQUc7QUFBRUwsUUFBQUEsSUFBSSxFQUFFSztBQUFSLE9BQVY7QUFDSDs7QUFFREMsSUFBQUEsTUFBTSxDQUFDQyxNQUFQLENBQWNSLFFBQWQsRUFBd0JNLE9BQXhCO0FBQ0g7O0FBRUQsTUFBSUcsU0FBUyxHQUFHVCxRQUFRLENBQUNDLElBQXpCO0FBRUFILEVBQUFBLE1BQU0sQ0FBQ1ksVUFBUCxDQUFrQmQsWUFBbEIsRUFBZ0M7QUFDNUJlLElBQUFBLEtBQUssRUFBRUY7QUFEcUIsR0FBaEMsRUFFR0csSUFGSCxDQUVRLG1CQUZSLEVBRTZCLE1BQU07QUFDL0JkLElBQUFBLE1BQU0sQ0FBQ2UsUUFBUCxDQUFnQkosU0FBaEIsRUFBMkJULFFBQTNCO0FBQ0gsR0FKRDtBQUtIOztBQUVEYyxNQUFNLENBQUNDLE9BQVAsR0FBaUJsQixPQUFqQiIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5jb25zdCBGRUFUVVJFX05BTUUgPSAnY3JlYXRlVGltZXN0YW1wJztcblxuLyoqXG4gKiBBIHJ1bGUgc3BlY2lmaWVzIHRoZSBlbnRpdHkgdG8gYXV0b21hdGljYWxseSByZWNvcmQgdGhlIGNyZWF0aW9uIHRpbWVcbiAqIEBtb2R1bGUgRW50aXR5RmVhdHVyZV9DcmVhdGVUaW1lc3RhbXBcbiAqL1xuXG4vKipcbiAqIEluaXRpYWxpemUgdGhlIGZlYXR1cmVcbiAqIEBwYXJhbSB7T29sb25nRW50aXR5fSBlbnRpdHkgLSBFbnRpdHkgdG8gYXBwbHkgdGhpcyBmZWF0dXJlXG4gKiBAcGFyYW0ge2FycmF5fSBvcHRpb25zIC0gRmllbGQgb3B0aW9uc1xuICovXG5mdW5jdGlvbiBmZWF0dXJlKGVudGl0eSwgYXJncyA9IFtdKSB7XG4gICAgbGV0IHR5cGVJbmZvID0ge1xuICAgICAgICBuYW1lOiAnY3JlYXRlZEF0JyxcbiAgICAgICAgdHlwZTogJ2RhdGV0aW1lJyxcbiAgICAgICAgYXV0bzogdHJ1ZSxcbiAgICAgICAgcmVhZE9ubHk6IHRydWUsXG4gICAgICAgIHdyaXRlT25jZTogdHJ1ZVxuICAgIH07XG5cbiAgICBsZXQgWyBvcHRpb25zIF0gPSBhcmdzO1xuXG4gICAgaWYgKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgb3B0aW9ucyA9IHsgbmFtZTogb3B0aW9ucyB9O1xuICAgICAgICB9XG5cbiAgICAgICAgT2JqZWN0LmFzc2lnbih0eXBlSW5mbywgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgbGV0IGZpZWxkTmFtZSA9IHR5cGVJbmZvLm5hbWU7XG5cbiAgICBlbnRpdHkuYWRkRmVhdHVyZShGRUFUVVJFX05BTUUsIHtcbiAgICAgICAgZmllbGQ6IGZpZWxkTmFtZVxuICAgIH0pLm9uY2UoJ2FmdGVyQWRkaW5nRmllbGRzJywgKCkgPT4ge1xuICAgICAgICBlbnRpdHkuYWRkRmllbGQoZmllbGROYW1lLCB0eXBlSW5mbyk7XG4gICAgfSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZmVhdHVyZTsiXX0=