"use strict";

require("source-map-support/register");

const {
  _
} = require('rk-utils');

const escodegen = require('escodegen');

const esprima = require('esprima');

const AST_OBJECT_TYPES = ['ThisExpression', 'MemberExpression', 'BinaryExpression', 'UnaryExpression', 'ArrowFunctionExpression', 'FunctionExpression', 'ArrayExpression', 'ObjectExpression', 'CallExpression', 'YieldExpression', 'AwaitExpression', 'AssignmentExpression', 'Literal', 'Identifier'];

function astParams(params) {
  params = Array.isArray(params) ? params : [params];
  return params.map(p => {
    if (typeof p === 'string') {
      return astId(p);
    }

    if (_.isPlainObject(p)) {
      if (p.type === 'Identifier' || p.type === 'AssignmentPattern') {
        return p;
      }

      if (p.oolType === 'Parameter') {
        if (p.defaultValue) {
          return {
            "type": "AssignmentPattern",
            "left": {
              "type": "Identifier",
              "name": p.name
            },
            "right": astLiteral(p.defaultValue)
          };
        }

        return astId(p.name);
      }
    }

    throw new Error('Invalid param: ' + JSON.stringify(p));
  });
}

function mapArgs(args) {
  args = Array.isArray(args) ? args : [args];
  if (_.isEmpty(args)) return [];
  return args.map(a => {
    if (_.isPlainObject(a) && 'type' in a) {
      return a;
    }

    return astValue(a);
  });
}

function mapBody(body) {
  if (Array.isArray(body)) {
    return astBlock(body);
  }

  if (_.isPlainObject(body) && 'type' in body) {
    return body;
  }

  return astValue(body);
}

function astProgram(strict = true) {
  return {
    "type": "Program",
    "body": strict ? [astExpression(astValue('use strict'))] : [],
    "sourceType": "script"
  };
}

function astRequire(varName, requirePath, isObjDestruct = false) {
  return {
    "type": "VariableDeclaration",
    "declarations": [{
      "type": "VariableDeclarator",
      "id": isObjDestruct ? astObjPat(varName) : astId(varName),
      "init": astCall('require', [astValue(requirePath)])
    }],
    "kind": "const"
  };
}

function astLeadingComments(comment, type = 'Line') {
  return comment ? {
    "leadingComments": [{
      "type": type,
      "value": comment,
      "range": [1, comment.length + 3]
    }]
  } : {};
}

function astVarDeclare(left, right, isConstant = false, isObjDestruct = false, comment = false) {
  return {
    "type": "VariableDeclaration",
    "declarations": [{
      "type": "VariableDeclarator",
      "id": isObjDestruct ? astObjPat(left) : astId(left),
      "init": _.isNil(right) ? null : astValue(right)
    }],
    "kind": isConstant ? "const" : "let",
    ...astLeadingComments(comment)
  };
}

function astClassDeclare(className, superClassName, body, comment = false) {
  let ast = {
    "type": "ClassDeclaration",
    "id": astId(className),
    ...(comment ? astLeadingComments(`*\n * ${comment}\n * @class\n `, 'Block') : {})
  };

  if (superClassName) {
    ast['superClass'] = astId(superClassName);
  }

  ast['body'] = {
    "type": "ClassBody",
    "body": body ? Array.isArray(body) ? body : [body] : []
  };
  return ast;
}

function astMemberMethod(name, params, body, generator = false, async = false, isStatic = false, comment = false) {
  return {
    "type": "MethodDefinition",
    "key": astId(name),
    "computed": false,
    "value": astAnonymousFunction(params, body, generator, async),
    "kind": "method",
    "static": isStatic,
    ...(comment ? astLeadingComments(`*\n * ${comment}${params.map(p => `\n * @param ${p}`).join('')}${Array.isArray(body) && _.last(body).type === 'ReturnStatement' ? '\n * @returns {*}' : ''}\n `, 'Block') : {})
  };
}

function astIf(test, consequent, alternate, comment = false) {
  return {
    "type": "IfStatement",
    "test": astValue(test),
    "consequent": mapBody(consequent),
    "alternate": _.isNil(alternate) ? null : mapBody(alternate),
    ...astLeadingComments(comment)
  };
}

function astBinExp(left, operator, right) {
  return {
    "type": "BinaryExpression",
    "operator": operator,
    "left": astValue(left),
    "right": astValue(right)
  };
}

function astLogicalExp(left, operator, right) {
  return {
    "type": "LogicalExpression",
    "operator": operator,
    "left": astValue(left),
    "right": astValue(right)
  };
}

function astCall(functionName, args) {
  return {
    "type": "CallExpression",
    "callee": _.isPlainObject(functionName) ? functionName : astVarRef(functionName),
    "arguments": mapArgs(args)
  };
}

function astYield(target, delegate = false) {
  return {
    "type": "YieldExpression",
    "argument": target,
    "delegate": delegate
  };
}

function astAwait(functionName, args) {
  return {
    "type": "AwaitExpression",
    "argument": astCall(functionName, args)
  };
}

function astArrayAccess(name, index) {
  return {
    "type": "MemberExpression",
    "computed": true,
    "object": astVarRef(name),
    "property": {
      "type": "Literal",
      "value": index,
      "raw": `${index}`
    }
  };
}

function astVarRef(name, elementStyle = false) {
  if (_.isPlainObject(name)) {
    if (name.type === 'MemberExpression' || name.type === 'Identifier') {
      return name;
    }

    if (name.oolType === 'ObjectReference') {
      return astVarRef(name.name, elementStyle);
    }

    throw new Error('Invalid reference: ' + JSON.stringify(name));
  }

  let p = name.split('.');

  if (p.length > 1) {
    let result = {
      "type": "MemberExpression",
      "computed": elementStyle,
      "property": elementStyle ? astLiteral(p.pop()) : astId(p.pop())
    };
    let last = result;

    while (p.length > 1) {
      last["object"] = {
        "type": "MemberExpression",
        "computed": elementStyle,
        "property": elementStyle ? astLiteral(p.pop()) : astId(p.pop())
      };
      last = last["object"];
    }

    last["object"] = p[0] === 'this' ? astThis() : astId(p[0]);
    return result;
  } else {
    return astId(name);
  }
}

function astThis() {
  return {
    "type": "ThisExpression"
  };
}

function astId(name) {
  if (typeof name === 'string') {
    return {
      "type": "Identifier",
      "name": name
    };
  } else if (_.isPlainObject(name) && name.type === 'Identifier') {
    return name;
  }

  throw new Error('Invalid identifier name: ' + JSON.stringify(name));
}

function astObjPat(keys) {
  return {
    "type": "ObjectPattern",
    "properties": _.map(keys, k => ({
      "type": "Property",
      "key": astId(k),
      "computed": false,
      "value": astId(k),
      "kind": "init",
      "method": false,
      "shorthand": true
    }))
  };
}

function astMember(key, any, shorthand = false) {
  return {
    "type": "Property",
    "key": key.startsWith(':') ? astLiteral(key) : astId(key),
    "computed": false,
    "value": any,
    "kind": "init",
    "method": false,
    "shorthand": shorthand
  };
}

function astValue(value) {
  if (Array.isArray(value)) {
    return {
      "type": "ArrayExpression",
      "elements": _.map(value, e => astValue(e))
    };
  }

  if (_.isPlainObject(value)) {
    if (AST_OBJECT_TYPES.indexOf(value.type) !== -1) {
      return value;
    }

    if (value.oolType === 'ObjectReference') {
      return astVarRef(value.name, true);
    }

    if (value.oolType === 'RegExp') {
      let [literal] = esprima.tokenize(value.value);
      return {
        "type": "NewExpression",
        "callee": {
          "type": "Identifier",
          "name": "RegExp"
        },
        "arguments": [astLiteral(literal.regex.pattern), ...(literal.regex.flags ? [astLiteral(literal.regex.flags)] : [])]
      };
    }

    let props = [];

    _.forOwn(value, (any, key) => {
      props.push(astMember(key, astValue(any)));
    });

    return {
      "type": "ObjectExpression",
      "properties": props
    };
  }

  if (_.isObject(value)) {
    throw new Error('Only plain object supported. Given: ' + JSON.stringify(value));
  }

  return astLiteral(value);
}

function astLiteral(value) {
  return {
    "type": "Literal",
    "value": value,
    "raw": JSON.stringify(value)
  };
}

function astAddMember(obj, member) {
  obj.properties.push(member);
}

function astPushInBody(obj, expr) {
  if (Array.isArray(obj.body)) {
    obj.body = obj.body.concat(_.castArray(expr));
  } else {
    obj.body.body = obj.body.body.concat(_.castArray(expr));
  }
}

function astFunction(name, params, body, generator = false, async = false) {
  return {
    "type": "FunctionDeclaration",
    "id": astId(name),
    "generator": generator,
    "expression": false,
    "async": async,
    "defaults": [],
    "params": astParams(params),
    "body": astBlock(body)
  };
}

function astAnonymousFunction(params, body, generator = false, async = false) {
  return {
    "type": "FunctionExpression",
    "id": null,
    "params": astParams(params),
    "defaults": [],
    "body": astBlock(body),
    "generator": generator,
    "expression": false,
    "async": async
  };
}

function astArrowFunction(params, body, generator = false, async = false) {
  return {
    "type": "ArrowFunctionExpression",
    "id": null,
    "params": astParams(params),
    "body": mapBody(body),
    "generator": generator,
    "expression": true,
    "async": async
  };
}

function astBlock(body) {
  return {
    "type": "BlockStatement",
    "body": Array.isArray(body) ? body : [body]
  };
}

function astMatchObject(idList, right, isConstant = true) {
  return {
    "type": "VariableDeclaration",
    "declarations": [{
      "type": "VariableDeclarator",
      "id": {
        "type": "ObjectPattern",
        "properties": _.map(idList, id => astMember(id, astId(id), true))
      },
      "init": right
    }],
    "kind": isConstant ? "const" : "let"
  };
}

function astExpression(expr, comment = false) {
  return {
    "type": "ExpressionStatement",
    "expression": expr,
    ...astLeadingComments(comment)
  };
}

function astAssign(left, right, comment = false) {
  return astExpression({
    "type": "AssignmentExpression",
    "operator": "=",
    "left": astVarRef(left),
    "right": astValue(right)
  }, comment);
}

function astConditional(test, consequent, alternate) {
  return {
    "type": "ConditionalExpression",
    "test": astValue(test),
    "consequent": astValue(consequent),
    "alternate": astValue(alternate)
  };
}

function astThrow(name, args) {
  return {
    "type": "ThrowStatement",
    "argument": {
      "type": "NewExpression",
      "callee": astVarRef(name),
      "arguments": mapArgs(args)
    }
  };
}

function astNot(expr) {
  return {
    "type": "UnaryExpression",
    "operator": "!",
    "argument": astValue(expr),
    "prefix": true
  };
}

function astReturn(val) {
  return {
    "type": "ReturnStatement",
    "argument": astValue(val)
  };
}

function astToCode(ast) {
  return escodegen.generate(ast, {
    format: {
      indent: {
        style: '    ',
        base: 0,
        adjustMultilineComment: false
      },
      newline: '\n',
      space: ' ',
      json: false,
      renumber: false,
      hexadecimal: false,
      quotes: 'single',
      escapeless: false,
      compact: false,
      parentheses: true,
      semicolons: true,
      safeConcatenation: false
    },
    comment: true
  });
}

module.exports = {
  astProgram,
  astRequire,
  astVarDeclare,
  astClassDeclare,
  astMemberMethod,
  astCall,
  astYield,
  astAwait,
  astThis,
  astId,
  astVarRef,
  astValue,
  astFunction,
  astAnonymousFunction,
  astArrowFunction,
  astIf,
  astConditional,
  astBinExp,
  astLogicalExp,
  astBlock,
  astMatchObject,
  astExpression,
  astAssign,
  astAddMember,
  astMember,
  astPushInBody,
  astThrow,
  astNot,
  astReturn,
  astLiteral,
  astParams,
  astArrayAccess,
  astToCode
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9tb2RlbGVyL3V0aWwvYXN0LmpzIl0sIm5hbWVzIjpbIl8iLCJyZXF1aXJlIiwiZXNjb2RlZ2VuIiwiZXNwcmltYSIsIkFTVF9PQkpFQ1RfVFlQRVMiLCJhc3RQYXJhbXMiLCJwYXJhbXMiLCJBcnJheSIsImlzQXJyYXkiLCJtYXAiLCJwIiwiYXN0SWQiLCJpc1BsYWluT2JqZWN0IiwidHlwZSIsIm9vbFR5cGUiLCJkZWZhdWx0VmFsdWUiLCJuYW1lIiwiYXN0TGl0ZXJhbCIsIkVycm9yIiwiSlNPTiIsInN0cmluZ2lmeSIsIm1hcEFyZ3MiLCJhcmdzIiwiaXNFbXB0eSIsImEiLCJhc3RWYWx1ZSIsIm1hcEJvZHkiLCJib2R5IiwiYXN0QmxvY2siLCJhc3RQcm9ncmFtIiwic3RyaWN0IiwiYXN0RXhwcmVzc2lvbiIsImFzdFJlcXVpcmUiLCJ2YXJOYW1lIiwicmVxdWlyZVBhdGgiLCJpc09iakRlc3RydWN0IiwiYXN0T2JqUGF0IiwiYXN0Q2FsbCIsImFzdExlYWRpbmdDb21tZW50cyIsImNvbW1lbnQiLCJsZW5ndGgiLCJhc3RWYXJEZWNsYXJlIiwibGVmdCIsInJpZ2h0IiwiaXNDb25zdGFudCIsImlzTmlsIiwiYXN0Q2xhc3NEZWNsYXJlIiwiY2xhc3NOYW1lIiwic3VwZXJDbGFzc05hbWUiLCJhc3QiLCJhc3RNZW1iZXJNZXRob2QiLCJnZW5lcmF0b3IiLCJhc3luYyIsImlzU3RhdGljIiwiYXN0QW5vbnltb3VzRnVuY3Rpb24iLCJqb2luIiwibGFzdCIsImFzdElmIiwidGVzdCIsImNvbnNlcXVlbnQiLCJhbHRlcm5hdGUiLCJhc3RCaW5FeHAiLCJvcGVyYXRvciIsImFzdExvZ2ljYWxFeHAiLCJmdW5jdGlvbk5hbWUiLCJhc3RWYXJSZWYiLCJhc3RZaWVsZCIsInRhcmdldCIsImRlbGVnYXRlIiwiYXN0QXdhaXQiLCJhc3RBcnJheUFjY2VzcyIsImluZGV4IiwiZWxlbWVudFN0eWxlIiwic3BsaXQiLCJyZXN1bHQiLCJwb3AiLCJhc3RUaGlzIiwia2V5cyIsImsiLCJhc3RNZW1iZXIiLCJrZXkiLCJhbnkiLCJzaG9ydGhhbmQiLCJzdGFydHNXaXRoIiwidmFsdWUiLCJlIiwiaW5kZXhPZiIsImxpdGVyYWwiLCJ0b2tlbml6ZSIsInJlZ2V4IiwicGF0dGVybiIsImZsYWdzIiwicHJvcHMiLCJmb3JPd24iLCJwdXNoIiwiaXNPYmplY3QiLCJhc3RBZGRNZW1iZXIiLCJvYmoiLCJtZW1iZXIiLCJwcm9wZXJ0aWVzIiwiYXN0UHVzaEluQm9keSIsImV4cHIiLCJjb25jYXQiLCJjYXN0QXJyYXkiLCJhc3RGdW5jdGlvbiIsImFzdEFycm93RnVuY3Rpb24iLCJhc3RNYXRjaE9iamVjdCIsImlkTGlzdCIsImlkIiwiYXN0QXNzaWduIiwiYXN0Q29uZGl0aW9uYWwiLCJhc3RUaHJvdyIsImFzdE5vdCIsImFzdFJldHVybiIsInZhbCIsImFzdFRvQ29kZSIsImdlbmVyYXRlIiwiZm9ybWF0IiwiaW5kZW50Iiwic3R5bGUiLCJiYXNlIiwiYWRqdXN0TXVsdGlsaW5lQ29tbWVudCIsIm5ld2xpbmUiLCJzcGFjZSIsImpzb24iLCJyZW51bWJlciIsImhleGFkZWNpbWFsIiwicXVvdGVzIiwiZXNjYXBlbGVzcyIsImNvbXBhY3QiLCJwYXJlbnRoZXNlcyIsInNlbWljb2xvbnMiLCJzYWZlQ29uY2F0ZW5hdGlvbiIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBOzs7O0FBT0EsTUFBTTtBQUFFQSxFQUFBQTtBQUFGLElBQVFDLE9BQU8sQ0FBQyxVQUFELENBQXJCOztBQUNBLE1BQU1DLFNBQVMsR0FBR0QsT0FBTyxDQUFDLFdBQUQsQ0FBekI7O0FBQ0EsTUFBTUUsT0FBTyxHQUFHRixPQUFPLENBQUMsU0FBRCxDQUF2Qjs7QUFFQSxNQUFNRyxnQkFBZ0IsR0FBRyxDQUNyQixnQkFEcUIsRUFFckIsa0JBRnFCLEVBR3JCLGtCQUhxQixFQUlyQixpQkFKcUIsRUFLckIseUJBTHFCLEVBTXJCLG9CQU5xQixFQU9yQixpQkFQcUIs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QUFtQmJFLEVBQUFBLGFBbkJhO0FBb0JibkMsRUFBQUEsUUFwQmE7QUFxQmI4RSxFQUFBQSxjQXJCYTtBQXNCYjNFLEVBQUFBLGFBdEJhO0FBdUJiOEUsRUFBQUEsU0F2QmE7QUF3QmJiLEVBQUFBLFlBeEJhO0FBeUJiakIsRUFBQUEsU0F6QmE7QUEwQmJxQixFQUFBQSxhQTFCYTtBQTJCYlcsRUFBQUEsUUEzQmE7QUE0QmJDLEVBQUFBLE1BNUJhO0FBNkJiQyxFQUFBQSxTQTdCYTtBQThCYmhHLEVBQUFBLFVBOUJhO0FBK0JiWixFQUFBQSxTQS9CYTtBQWdDYmlFLEVBQUFBLGNBaENhO0FBaUNiNkMsRUFBQUE7QUFqQ2EsQ0FBakIiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuLyoqXG4gKiBAbW9kdWxlXG4gKiBAaWdub3JlXG4gKi9cblxuY29uc3QgeyBfIH0gPSByZXF1aXJlKCdyay11dGlscycpO1xuY29uc3QgZXNjb2RlZ2VuID0gcmVxdWlyZSgnZXNjb2RlZ2VuJyk7XG5jb25zdCBlc3ByaW1hID0gcmVxdWlyZSgnZXNwcmltYScpO1xuXG5jb25zdCBBU1RfT0JKRUNUX1RZUEVTID0gW1xuICAgICdUaGlzRXhwcmVzc2lvbicsXG4gICAgJ01lbWJlckV4cHJlc3Npb24nLFxuICAgICdCaW5hcnlFeHByZXNzaW9uJyxcbiAgICAnVW5hcnlFeHByZXNzaW9uJyxcbiAgICAnQXJyb3dGdW5jdGlvbkV4cHJlc3Npb24nLFxuICAgICdGdW5jdGlvbkV4cHJlc3Npb24nLFxuICAgICdBcnJheUV4cHJlc3Npb24nLFxuICAgICdPYmplY3RFeHByZXNzaW9uJyxcbiAgICAnQ2FsbEV4cHJlc3Npb24nLFxuICAgICdZaWVsZEV4cHJlc3Npb24nLFxuICAgICdBd2FpdEV4cHJlc3Npb24nLFxuICAgICdBc3NpZ25tZW50RXhwcmVzc2lvbicsXG4gICAgJ0xpdGVyYWwnLFxuICAgICdJZGVudGlmaWVyJ1xuXTtcblxuZnVuY3Rpb24gYXN0UGFyYW1zKHBhcmFtcykge1xuICAgIHBhcmFtcyA9IEFycmF5LmlzQXJyYXkocGFyYW1zKSA/IHBhcmFtcyA6IFsgcGFyYW1zIF07XG5cbiAgICByZXR1cm4gcGFyYW1zLm1hcChwID0+IHtcbiAgICAgICAgIGlmICh0eXBlb2YgcCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICByZXR1cm4gYXN0SWQocCk7XG4gICAgICAgICB9XG5cbiAgICAgICAgaWYgKF8uaXNQbGFpbk9iamVjdChwKSkge1xuICAgICAgICAgICAgaWYgKHAudHlwZSA9PT0gJ0lkZW50aWZpZXInIHx8IHAudHlwZSA9PT0gJ0Fzc2lnbm1lbnRQYXR0ZXJuJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocC5vb2xUeXBlID09PSAnUGFyYW1ldGVyJykge1xuICAgICAgICAgICAgICAgIGlmIChwLmRlZmF1bHRWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwiQXNzaWdubWVudFBhdHRlcm5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibGVmdFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwiSWRlbnRpZmllclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBwLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBcInJpZ2h0XCI6IGFzdExpdGVyYWwocC5kZWZhdWx0VmFsdWUpXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFzdElkKHAubmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcGFyYW06ICcgKyBKU09OLnN0cmluZ2lmeShwKSk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIG1hcEFyZ3MoYXJncykge1xuICAgIGFyZ3MgPSBBcnJheS5pc0FycmF5KGFyZ3MpID8gYXJncyA6IFsgYXJncyBdO1xuXG4gICAgaWYgKF8uaXNFbXB0eShhcmdzKSkgcmV0dXJuIFtdO1xuXG4gICAgcmV0dXJuIGFyZ3MubWFwKGEgPT4ge1xuICAgICAgICBpZiAoXy5pc1BsYWluT2JqZWN0KGEpICYmICd0eXBlJyBpbiBhKSB7XG4gICAgICAgICAgICByZXR1cm4gYTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBhc3RWYWx1ZShhKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gbWFwQm9keShib2R5KSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYm9keSkpIHtcbiAgICAgICAgcmV0dXJuIGFzdEJsb2NrKGJvZHkpO1xuICAgIH1cbiAgICBcbiAgICBpZiAoXy5pc1BsYWluT2JqZWN0KGJvZHkpICYmICd0eXBlJyBpbiBib2R5KSB7XG4gICAgICAgIHJldHVybiBib2R5O1xuICAgIH1cblxuICAgIHJldHVybiBhc3RWYWx1ZShib2R5KTtcbn1cblxuZnVuY3Rpb24gYXN0UHJvZ3JhbShzdHJpY3QgPSB0cnVlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgXCJ0eXBlXCI6IFwiUHJvZ3JhbVwiLFxuICAgICAgICBcImJvZHlcIjogc3RyaWN0ID8gW2FzdEV4cHJlc3Npb24oYXN0VmFsdWUoJ3VzZSBzdHJpY3QnKSldIDogW10sXG4gICAgICAgIFwic291cmNlVHlwZVwiOiBcInNjcmlwdFwiXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gYXN0UmVxdWlyZSh2YXJOYW1lLCByZXF1aXJlUGF0aCwgaXNPYmpEZXN0cnVjdCA9IGZhbHNlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgXCJ0eXBlXCI6IFwiVmFyaWFibGVEZWNsYXJhdGlvblwiLFxuICAgICAgICBcImRlY2xhcmF0aW9uc1wiOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwiVmFyaWFibGVEZWNsYXJhdG9yXCIsXG4gICAgICAgICAgICAgICAgXCJpZFwiOiBpc09iakRlc3RydWN0ID8gYXN0T2JqUGF0KHZhck5hbWUpIDogYXN0SWQodmFyTmFtZSksXG4gICAgICAgICAgICAgICAgXCJpbml0XCI6IGFzdENhbGwoJ3JlcXVpcmUnLCBbIGFzdFZhbHVlKHJlcXVpcmVQYXRoKSBdKVxuICAgICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBcImtpbmRcIjogXCJjb25zdFwiXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gYXN0TGVhZGluZ0NvbW1lbnRzKGNvbW1lbnQsIHR5cGUgPSAnTGluZScpIHtcbiAgICByZXR1cm4gY29tbWVudCA/IHsgXCJsZWFkaW5nQ29tbWVudHNcIjogW1xuICAgICAgICB7XG4gICAgICAgICAgICBcInR5cGVcIjogdHlwZSxcbiAgICAgICAgICAgIFwidmFsdWVcIjogY29tbWVudCxcbiAgICAgICAgICAgIFwicmFuZ2VcIjogW1xuICAgICAgICAgICAgICAgIDEsXG4gICAgICAgICAgICAgICAgY29tbWVudC5sZW5ndGgrM1xuICAgICAgICAgICAgXVxuICAgICAgICB9XG4gICAgXX0gOiB7fTtcbn1cblxuZnVuY3Rpb24gYXN0VmFyRGVjbGFyZShsZWZ0LCByaWdodCwgaXNDb25zdGFudCA9IGZhbHNlLCBpc09iakRlc3RydWN0ID0gZmFsc2UsIGNvbW1lbnQgPSBmYWxzZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIFwidHlwZVwiOiBcIlZhcmlhYmxlRGVjbGFyYXRpb25cIixcbiAgICAgICAgXCJkZWNsYXJhdGlvbnNcIjogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcIlZhcmlhYmxlRGVjbGFyYXRvclwiLFxuICAgICAgICAgICAgICAgIFwiaWRcIjogaXNPYmpEZXN0cnVjdCA/IGFzdE9ialBhdChsZWZ0KSA6IGFzdElkKGxlZnQpLFxuICAgICAgICAgICAgICAgIFwiaW5pdFwiOiBfLmlzTmlsKHJpZ2h0KSA/IG51bGwgOiBhc3RWYWx1ZShyaWdodClcbiAgICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgXCJraW5kXCI6IGlzQ29uc3RhbnQgPyBcImNvbnN0XCIgOiBcImxldFwiLFxuICAgICAgICAuLi5hc3RMZWFkaW5nQ29tbWVudHMoY29tbWVudClcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBhc3RDbGFzc0RlY2xhcmUoY2xhc3NOYW1lLCBzdXBlckNsYXNzTmFtZSwgYm9keSwgY29tbWVudCA9IGZhbHNlKSB7XG4gICAgbGV0IGFzdCA9IHtcbiAgICAgICAgXCJ0eXBlXCI6IFwiQ2xhc3NEZWNsYXJhdGlvblwiLFxuICAgICAgICBcImlkXCI6IGFzdElkKGNsYXNzTmFtZSksXG4gICAgICAgIC4uLihjb21tZW50ID8gYXN0TGVhZGluZ0NvbW1lbnRzKGAqXFxuICogJHtjb21tZW50fVxcbiAqIEBjbGFzc1xcbiBgLCAnQmxvY2snKSA6IHt9KVxuICAgIH07XG5cbiAgICBpZiAoc3VwZXJDbGFzc05hbWUpIHtcbiAgICAgICAgYXN0WydzdXBlckNsYXNzJ10gPSBhc3RJZChzdXBlckNsYXNzTmFtZSk7XG4gICAgfVxuXG4gICAgYXN0Wydib2R5J10gPSB7XG4gICAgICAgIFwidHlwZVwiOiBcIkNsYXNzQm9keVwiLFxuICAgICAgICBcImJvZHlcIjogYm9keSA/IChBcnJheS5pc0FycmF5KGJvZHkpID8gYm9keSA6IFsgYm9keSBdKSA6IFtdXG4gICAgfTtcblxuICAgIHJldHVybiBhc3Q7XG59XG5cbmZ1bmN0aW9uIGFzdE1lbWJlck1ldGhvZChuYW1lLCBwYXJhbXMsIGJvZHksIGdlbmVyYXRvciA9IGZhbHNlLCBhc3luYyA9IGZhbHNlLCBpc1N0YXRpYyA9IGZhbHNlLCBjb21tZW50ID0gZmFsc2UpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBcInR5cGVcIjogXCJNZXRob2REZWZpbml0aW9uXCIsXG4gICAgICAgIFwia2V5XCI6IGFzdElkKG5hbWUpLFxuICAgICAgICBcImNvbXB1dGVkXCI6IGZhbHNlLFxuICAgICAgICBcInZhbHVlXCI6IGFzdEFub255bW91c0Z1bmN0aW9uKHBhcmFtcywgYm9keSwgZ2VuZXJhdG9yLCBhc3luYyksXG4gICAgICAgIFwia2luZFwiOiBcIm1ldGhvZFwiLFxuICAgICAgICBcInN0YXRpY1wiOiBpc1N0YXRpYyxcbiAgICAgICAgLy9cIipcXG4gKiBcXG4gKiBAcGFyYW0gaWRlbnRpdHlcXG4gKiBAcGFyYW0gcGFzc3dvcmRcXG4gKiBAcmV0dXJucyB7Kn1cXG4gXCJcbiAgICAgICAgLi4uKGNvbW1lbnQgPyBhc3RMZWFkaW5nQ29tbWVudHMoYCpcXG4gKiAke2NvbW1lbnR9JHtwYXJhbXMubWFwKHAgPT4gYFxcbiAqIEBwYXJhbSAke3B9YCkuam9pbignJyl9JHtBcnJheS5pc0FycmF5KGJvZHkpICYmIF8ubGFzdChib2R5KS50eXBlID09PSAnUmV0dXJuU3RhdGVtZW50JyA/ICdcXG4gKiBAcmV0dXJucyB7Kn0nIDogJyd9XFxuIGAsICdCbG9jaycpIDoge30pXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gYXN0SWYodGVzdCwgY29uc2VxdWVudCwgYWx0ZXJuYXRlLCBjb21tZW50ID0gZmFsc2UpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBcInR5cGVcIjogXCJJZlN0YXRlbWVudFwiLFxuICAgICAgICBcInRlc3RcIjogYXN0VmFsdWUodGVzdCksXG4gICAgICAgIFwiY29uc2VxdWVudFwiOiBtYXBCb2R5KGNvbnNlcXVlbnQpLFxuICAgICAgICBcImFsdGVybmF0ZVwiOiBfLmlzTmlsKGFsdGVybmF0ZSkgPyBudWxsIDogbWFwQm9keShhbHRlcm5hdGUpLFxuICAgICAgICAuLi5hc3RMZWFkaW5nQ29tbWVudHMoY29tbWVudClcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBhc3RCaW5FeHAobGVmdCwgb3BlcmF0b3IsIHJpZ2h0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgXCJ0eXBlXCI6IFwiQmluYXJ5RXhwcmVzc2lvblwiLFxuICAgICAgICBcIm9wZXJhdG9yXCI6IG9wZXJhdG9yLFxuICAgICAgICBcImxlZnRcIjogYXN0VmFsdWUobGVmdCksXG4gICAgICAgIFwicmlnaHRcIjogYXN0VmFsdWUocmlnaHQpXG4gICAgfVxufVxuXG5mdW5jdGlvbiBhc3RMb2dpY2FsRXhwKGxlZnQsIG9wZXJhdG9yLCByaWdodCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIFwidHlwZVwiOiBcIkxvZ2ljYWxFeHByZXNzaW9uXCIsXG4gICAgICAgIFwib3BlcmF0b3JcIjogb3BlcmF0b3IsXG4gICAgICAgIFwibGVmdFwiOiBhc3RWYWx1ZShsZWZ0KSxcbiAgICAgICAgXCJyaWdodFwiOiBhc3RWYWx1ZShyaWdodClcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGFzdENhbGwoZnVuY3Rpb25OYW1lLCBhcmdzKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgXCJ0eXBlXCI6IFwiQ2FsbEV4cHJlc3Npb25cIixcbiAgICAgICAgXCJjYWxsZWVcIjogXy5pc1BsYWluT2JqZWN0KGZ1bmN0aW9uTmFtZSkgPyBmdW5jdGlvbk5hbWUgOiBhc3RWYXJSZWYoZnVuY3Rpb25OYW1lKSxcbiAgICAgICAgXCJhcmd1bWVudHNcIjogbWFwQXJncyhhcmdzKVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIGFzdFlpZWxkKHRhcmdldCwgZGVsZWdhdGUgPSBmYWxzZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIFwidHlwZVwiOiBcIllpZWxkRXhwcmVzc2lvblwiLFxuICAgICAgICBcImFyZ3VtZW50XCI6IHRhcmdldCxcbiAgICAgICAgXCJkZWxlZ2F0ZVwiOiBkZWxlZ2F0ZVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIGFzdEF3YWl0KGZ1bmN0aW9uTmFtZSwgYXJncykge1xuICAgIHJldHVybiB7XG4gICAgICAgIFwidHlwZVwiOiBcIkF3YWl0RXhwcmVzc2lvblwiLFxuICAgICAgICBcImFyZ3VtZW50XCI6IGFzdENhbGwoZnVuY3Rpb25OYW1lLCBhcmdzKVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIGFzdEFycmF5QWNjZXNzKG5hbWUsIGluZGV4KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgXCJ0eXBlXCI6IFwiTWVtYmVyRXhwcmVzc2lvblwiLFxuICAgICAgICBcImNvbXB1dGVkXCI6IHRydWUsXG4gICAgICAgIFwib2JqZWN0XCI6IGFzdFZhclJlZihuYW1lKSxcbiAgICAgICAgXCJwcm9wZXJ0eVwiOiB7XG4gICAgICAgICAgICBcInR5cGVcIjogXCJMaXRlcmFsXCIsXG4gICAgICAgICAgICBcInZhbHVlXCI6IGluZGV4LFxuICAgICAgICAgICAgXCJyYXdcIjogYCR7aW5kZXh9YFxuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBhc3RWYXJSZWYobmFtZSwgZWxlbWVudFN0eWxlID0gZmFsc2UpIHtcbiAgICBpZiAoXy5pc1BsYWluT2JqZWN0KG5hbWUpKSB7XG4gICAgICAgIGlmIChuYW1lLnR5cGUgPT09ICdNZW1iZXJFeHByZXNzaW9uJyB8fCBuYW1lLnR5cGUgPT09ICdJZGVudGlmaWVyJykge1xuICAgICAgICAgICAgcmV0dXJuIG5hbWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobmFtZS5vb2xUeXBlID09PSAnT2JqZWN0UmVmZXJlbmNlJykge1xuICAgICAgICAgICAgcmV0dXJuIGFzdFZhclJlZihuYW1lLm5hbWUsIGVsZW1lbnRTdHlsZSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcmVmZXJlbmNlOiAnICsgSlNPTi5zdHJpbmdpZnkobmFtZSkpO1xuICAgIH1cblxuICAgIGxldCBwID0gbmFtZS5zcGxpdCgnLicpO1xuICAgIGlmIChwLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgLy9wLnJldmVyc2UoKTtcbiAgICAgICAgbGV0IHJlc3VsdCA9IHtcbiAgICAgICAgICAgIFwidHlwZVwiOiBcIk1lbWJlckV4cHJlc3Npb25cIixcbiAgICAgICAgICAgIFwiY29tcHV0ZWRcIjogZWxlbWVudFN0eWxlLFxuICAgICAgICAgICAgXCJwcm9wZXJ0eVwiOiBlbGVtZW50U3R5bGUgPyBhc3RMaXRlcmFsKHAucG9wKCkpIDogYXN0SWQocC5wb3AoKSlcbiAgICAgICAgfTtcblxuICAgICAgICBsZXQgbGFzdCA9IHJlc3VsdDtcblxuICAgICAgICB3aGlsZSAocC5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBsYXN0W1wib2JqZWN0XCJdID0ge1xuICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcIk1lbWJlckV4cHJlc3Npb25cIixcbiAgICAgICAgICAgICAgICBcImNvbXB1dGVkXCI6IGVsZW1lbnRTdHlsZSxcbiAgICAgICAgICAgICAgICBcInByb3BlcnR5XCI6IGVsZW1lbnRTdHlsZSA/IGFzdExpdGVyYWwocC5wb3AoKSkgOiBhc3RJZChwLnBvcCgpKVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgbGFzdCA9IGxhc3RbXCJvYmplY3RcIl07XG4gICAgICAgIH1cblxuICAgICAgICBsYXN0W1wib2JqZWN0XCJdID0gcFswXSA9PT0gJ3RoaXMnIFxuICAgICAgICAgICAgPyBhc3RUaGlzKClcbiAgICAgICAgICAgIDogYXN0SWQocFswXSk7XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gYXN0SWQobmFtZSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBhc3RUaGlzKCkge1xuICAgIHJldHVybiB7IFwidHlwZVwiOiBcIlRoaXNFeHByZXNzaW9uXCIgfTtcbn1cblxuZnVuY3Rpb24gYXN0SWQobmFtZSkge1xuICAgIGlmICh0eXBlb2YgbmFtZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFwidHlwZVwiOiBcIklkZW50aWZpZXJcIixcbiAgICAgICAgICAgIFwibmFtZVwiOiBuYW1lXG4gICAgICAgIH07XG4gICAgfSBlbHNlIGlmIChfLmlzUGxhaW5PYmplY3QobmFtZSkgJiYgbmFtZS50eXBlID09PSAnSWRlbnRpZmllcicpIHtcbiAgICAgICAgcmV0dXJuIG5hbWU7XG4gICAgfVxuXG4gICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGlkZW50aWZpZXIgbmFtZTogJyArIEpTT04uc3RyaW5naWZ5KG5hbWUpKTtcbn1cblxuZnVuY3Rpb24gYXN0T2JqUGF0KGtleXMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBcInR5cGVcIjogXCJPYmplY3RQYXR0ZXJuXCIsXG4gICAgICAgIFwicHJvcGVydGllc1wiOiBfLm1hcChrZXlzLCAoaykgPT4gKHtcbiAgICAgICAgICAgIFwidHlwZVwiOiBcIlByb3BlcnR5XCIsXG4gICAgICAgICAgICBcImtleVwiOiBhc3RJZChrKSxcbiAgICAgICAgICAgIFwiY29tcHV0ZWRcIjogZmFsc2UsXG4gICAgICAgICAgICBcInZhbHVlXCI6IGFzdElkKGspLFxuICAgICAgICAgICAgXCJraW5kXCI6IFwiaW5pdFwiLFxuICAgICAgICAgICAgXCJtZXRob2RcIjogZmFsc2UsXG4gICAgICAgICAgICBcInNob3J0aGFuZFwiOiB0cnVlXG4gICAgICAgIH0pKVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIGFzdE1lbWJlcihrZXksIGFueSwgc2hvcnRoYW5kID0gZmFsc2UpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBcInR5cGVcIjogXCJQcm9wZXJ0eVwiLFxuICAgICAgICBcImtleVwiOiBrZXkuc3RhcnRzV2l0aCgnOicpID8gYXN0TGl0ZXJhbChrZXkpIDogYXN0SWQoa2V5KSxcbiAgICAgICAgXCJjb21wdXRlZFwiOiBmYWxzZSxcbiAgICAgICAgXCJ2YWx1ZVwiOiBhbnksXG4gICAgICAgIFwia2luZFwiOiBcImluaXRcIixcbiAgICAgICAgXCJtZXRob2RcIjogZmFsc2UsXG4gICAgICAgIFwic2hvcnRoYW5kXCI6IHNob3J0aGFuZFxuICAgIH07XG59XG5cbmZ1bmN0aW9uIGFzdFZhbHVlKHZhbHVlKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBcInR5cGVcIjogXCJBcnJheUV4cHJlc3Npb25cIixcbiAgICAgICAgICAgIFwiZWxlbWVudHNcIjogXy5tYXAodmFsdWUsIGUgPT4gYXN0VmFsdWUoZSkpXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKF8uaXNQbGFpbk9iamVjdCh2YWx1ZSkpIHtcbiAgICAgICAgaWYgKEFTVF9PQkpFQ1RfVFlQRVMuaW5kZXhPZih2YWx1ZS50eXBlKSAhPT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh2YWx1ZS5vb2xUeXBlID09PSAnT2JqZWN0UmVmZXJlbmNlJykge1xuICAgICAgICAgICAgcmV0dXJuIGFzdFZhclJlZih2YWx1ZS5uYW1lLCB0cnVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh2YWx1ZS5vb2xUeXBlID09PSAnUmVnRXhwJykge1xuICAgICAgICAgICAgbGV0IFsgbGl0ZXJhbCBdID0gZXNwcmltYS50b2tlbml6ZSh2YWx1ZS52YWx1ZSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcIk5ld0V4cHJlc3Npb25cIixcbiAgICAgICAgICAgICAgICBcImNhbGxlZVwiOiB7XG4gICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcIklkZW50aWZpZXJcIixcbiAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiUmVnRXhwXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFwiYXJndW1lbnRzXCI6IFtcbiAgICAgICAgICAgICAgICAgICAgYXN0TGl0ZXJhbChsaXRlcmFsLnJlZ2V4LnBhdHRlcm4pLFxuICAgICAgICAgICAgICAgICAgICAuLi4obGl0ZXJhbC5yZWdleC5mbGFncyA/IFsgYXN0TGl0ZXJhbChsaXRlcmFsLnJlZ2V4LmZsYWdzKSBdIDogW10pXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBwcm9wcyA9IFtdO1xuXG4gICAgICAgIF8uZm9yT3duKHZhbHVlLCAoYW55LCBrZXkpID0+IHtcbiAgICAgICAgICAgIHByb3BzLnB1c2goYXN0TWVtYmVyKGtleSwgYXN0VmFsdWUoYW55KSkpO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgXCJ0eXBlXCI6IFwiT2JqZWN0RXhwcmVzc2lvblwiLFxuICAgICAgICAgICAgXCJwcm9wZXJ0aWVzXCI6IHByb3BzXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKF8uaXNPYmplY3QodmFsdWUpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignT25seSBwbGFpbiBvYmplY3Qgc3VwcG9ydGVkLiBHaXZlbjogJyArIEpTT04uc3RyaW5naWZ5KHZhbHVlKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFzdExpdGVyYWwodmFsdWUpO1xufVxuXG5mdW5jdGlvbiBhc3RMaXRlcmFsKHZhbHVlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgXCJ0eXBlXCI6IFwiTGl0ZXJhbFwiLFxuICAgICAgICBcInZhbHVlXCI6IHZhbHVlLFxuICAgICAgICBcInJhd1wiOiBKU09OLnN0cmluZ2lmeSh2YWx1ZSlcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBhc3RBZGRNZW1iZXIob2JqLCBtZW1iZXIpIHtcbiAgICBvYmoucHJvcGVydGllcy5wdXNoKG1lbWJlcik7XG59XG5cbmZ1bmN0aW9uIGFzdFB1c2hJbkJvZHkob2JqLCBleHByKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkob2JqLmJvZHkpKSB7XG4gICAgICAgIG9iai5ib2R5ID0gb2JqLmJvZHkuY29uY2F0KF8uY2FzdEFycmF5KGV4cHIpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBvYmouYm9keS5ib2R5ID0gb2JqLmJvZHkuYm9keS5jb25jYXQoXy5jYXN0QXJyYXkoZXhwcikpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gYXN0RnVuY3Rpb24obmFtZSwgcGFyYW1zLCBib2R5LCBnZW5lcmF0b3IgPSBmYWxzZSwgYXN5bmMgPSBmYWxzZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIFwidHlwZVwiOiBcIkZ1bmN0aW9uRGVjbGFyYXRpb25cIixcbiAgICAgICAgXCJpZFwiOiBhc3RJZChuYW1lKSxcbiAgICAgICAgXCJnZW5lcmF0b3JcIjogZ2VuZXJhdG9yLFxuICAgICAgICBcImV4cHJlc3Npb25cIjogZmFsc2UsXG4gICAgICAgIFwiYXN5bmNcIjogYXN5bmMsXG4gICAgICAgIFwiZGVmYXVsdHNcIjogW10sXG4gICAgICAgIFwicGFyYW1zXCI6IGFzdFBhcmFtcyhwYXJhbXMpLFxuICAgICAgICBcImJvZHlcIjogYXN0QmxvY2soYm9keSlcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBhc3RBbm9ueW1vdXNGdW5jdGlvbihwYXJhbXMsIGJvZHksIGdlbmVyYXRvciA9IGZhbHNlLCBhc3luYyA9IGZhbHNlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgXCJ0eXBlXCI6IFwiRnVuY3Rpb25FeHByZXNzaW9uXCIsXG4gICAgICAgIFwiaWRcIjogbnVsbCxcbiAgICAgICAgXCJwYXJhbXNcIjogYXN0UGFyYW1zKHBhcmFtcyksXG4gICAgICAgIFwiZGVmYXVsdHNcIjogW10sXG4gICAgICAgIFwiYm9keVwiOiBhc3RCbG9jayhib2R5KSxcbiAgICAgICAgXCJnZW5lcmF0b3JcIjogZ2VuZXJhdG9yLFxuICAgICAgICBcImV4cHJlc3Npb25cIjogZmFsc2UsXG4gICAgICAgIFwiYXN5bmNcIjogYXN5bmNcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBhc3RBcnJvd0Z1bmN0aW9uKHBhcmFtcywgYm9keSwgZ2VuZXJhdG9yID0gZmFsc2UsIGFzeW5jID0gZmFsc2UpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBcInR5cGVcIjogXCJBcnJvd0Z1bmN0aW9uRXhwcmVzc2lvblwiLFxuICAgICAgICBcImlkXCI6IG51bGwsXG4gICAgICAgIFwicGFyYW1zXCI6IGFzdFBhcmFtcyhwYXJhbXMpLFxuICAgICAgICBcImJvZHlcIjogbWFwQm9keShib2R5KSxcbiAgICAgICAgXCJnZW5lcmF0b3JcIjogZ2VuZXJhdG9yLFxuICAgICAgICBcImV4cHJlc3Npb25cIjogdHJ1ZSxcbiAgICAgICAgXCJhc3luY1wiOiBhc3luY1xuICAgIH1cbn1cblxuZnVuY3Rpb24gYXN0QmxvY2soYm9keSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIFwidHlwZVwiOiBcIkJsb2NrU3RhdGVtZW50XCIsXG4gICAgICAgIFwiYm9keVwiOiBBcnJheS5pc0FycmF5KGJvZHkpID8gYm9keSA6IFsgYm9keSBdXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gYXN0TWF0Y2hPYmplY3QoaWRMaXN0LCByaWdodCwgaXNDb25zdGFudCA9IHRydWUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBcInR5cGVcIjogXCJWYXJpYWJsZURlY2xhcmF0aW9uXCIsXG4gICAgICAgIFwiZGVjbGFyYXRpb25zXCI6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJWYXJpYWJsZURlY2xhcmF0b3JcIixcbiAgICAgICAgICAgICAgICBcImlkXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwiT2JqZWN0UGF0dGVyblwiLFxuICAgICAgICAgICAgICAgICAgICBcInByb3BlcnRpZXNcIjogXy5tYXAoaWRMaXN0LCBpZCA9PiBhc3RNZW1iZXIoaWQsIGFzdElkKGlkKSwgdHJ1ZSkpXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcImluaXRcIjogcmlnaHRcbiAgICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgXCJraW5kXCI6IGlzQ29uc3RhbnQgPyBcImNvbnN0XCIgOiBcImxldFwiXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gYXN0RXhwcmVzc2lvbihleHByLCBjb21tZW50ID0gZmFsc2UpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBcInR5cGVcIjogXCJFeHByZXNzaW9uU3RhdGVtZW50XCIsXG4gICAgICAgIFwiZXhwcmVzc2lvblwiOiBleHByLFxuICAgICAgICAuLi5hc3RMZWFkaW5nQ29tbWVudHMoY29tbWVudClcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBhc3RBc3NpZ24obGVmdCwgcmlnaHQsIGNvbW1lbnQgPSBmYWxzZSkge1xuICAgIHJldHVybiBhc3RFeHByZXNzaW9uKHtcbiAgICAgICAgXCJ0eXBlXCI6IFwiQXNzaWdubWVudEV4cHJlc3Npb25cIixcbiAgICAgICAgXCJvcGVyYXRvclwiOiBcIj1cIixcbiAgICAgICAgXCJsZWZ0XCI6IGFzdFZhclJlZihsZWZ0KSxcbiAgICAgICAgXCJyaWdodFwiOiBhc3RWYWx1ZShyaWdodClcbiAgICB9LCBjb21tZW50KTtcbn1cblxuZnVuY3Rpb24gYXN0Q29uZGl0aW9uYWwodGVzdCwgY29uc2VxdWVudCwgYWx0ZXJuYXRlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgXCJ0eXBlXCI6IFwiQ29uZGl0aW9uYWxFeHByZXNzaW9uXCIsXG4gICAgICAgIFwidGVzdFwiOiBhc3RWYWx1ZSh0ZXN0KSxcbiAgICAgICAgXCJjb25zZXF1ZW50XCI6IGFzdFZhbHVlKGNvbnNlcXVlbnQpLFxuICAgICAgICBcImFsdGVybmF0ZVwiOiBhc3RWYWx1ZShhbHRlcm5hdGUpXG4gICAgfVxufVxuXG5mdW5jdGlvbiBhc3RUaHJvdyhuYW1lLCBhcmdzKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgXCJ0eXBlXCI6IFwiVGhyb3dTdGF0ZW1lbnRcIixcbiAgICAgICAgXCJhcmd1bWVudFwiOiB7XG4gICAgICAgICAgICBcInR5cGVcIjogXCJOZXdFeHByZXNzaW9uXCIsXG4gICAgICAgICAgICBcImNhbGxlZVwiOiBhc3RWYXJSZWYobmFtZSksXG4gICAgICAgICAgICBcImFyZ3VtZW50c1wiOiBtYXBBcmdzKGFyZ3MpXG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5mdW5jdGlvbiBhc3ROb3QoZXhwcikge1xuICAgIHJldHVybiB7XG4gICAgICAgIFwidHlwZVwiOiBcIlVuYXJ5RXhwcmVzc2lvblwiLFxuICAgICAgICBcIm9wZXJhdG9yXCI6IFwiIVwiLFxuICAgICAgICBcImFyZ3VtZW50XCI6IGFzdFZhbHVlKGV4cHIpLFxuICAgICAgICBcInByZWZpeFwiOiB0cnVlXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gYXN0UmV0dXJuKHZhbCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIFwidHlwZVwiOiBcIlJldHVyblN0YXRlbWVudFwiLFxuICAgICAgICBcImFyZ3VtZW50XCI6IGFzdFZhbHVlKHZhbClcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBhc3RUb0NvZGUoYXN0KSB7ICAgICAgIFxuICAgIHJldHVybiBlc2NvZGVnZW4uZ2VuZXJhdGUoYXN0LCB7XG4gICAgICAgIGZvcm1hdDoge1xuICAgICAgICAgICAgaW5kZW50OiB7XG4gICAgICAgICAgICAgICAgc3R5bGU6ICcgICAgJyxcbiAgICAgICAgICAgICAgICBiYXNlOiAwLFxuICAgICAgICAgICAgICAgIGFkanVzdE11bHRpbGluZUNvbW1lbnQ6IGZhbHNlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbmV3bGluZTogJ1xcbicsXG4gICAgICAgICAgICBzcGFjZTogJyAnLFxuICAgICAgICAgICAganNvbjogZmFsc2UsXG4gICAgICAgICAgICByZW51bWJlcjogZmFsc2UsXG4gICAgICAgICAgICBoZXhhZGVjaW1hbDogZmFsc2UsXG4gICAgICAgICAgICBxdW90ZXM6ICdzaW5nbGUnLFxuICAgICAgICAgICAgZXNjYXBlbGVzczogZmFsc2UsXG4gICAgICAgICAgICBjb21wYWN0OiBmYWxzZSxcbiAgICAgICAgICAgIHBhcmVudGhlc2VzOiB0cnVlLFxuICAgICAgICAgICAgc2VtaWNvbG9uczogdHJ1ZSxcbiAgICAgICAgICAgIHNhZmVDb25jYXRlbmF0aW9uOiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICBjb21tZW50OiB0cnVlXG4gICAgfSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIGFzdFByb2dyYW0sXG4gICAgYXN0UmVxdWlyZSxcbiAgICBhc3RWYXJEZWNsYXJlLFxuICAgIGFzdENsYXNzRGVjbGFyZSxcbiAgICBhc3RNZW1iZXJNZXRob2QsXG4gICAgYXN0Q2FsbCxcbiAgICBhc3RZaWVsZCxcbiAgICBhc3RBd2FpdCxcbiAgICBhc3RUaGlzLFxuICAgIGFzdElkLFxuICAgIGFzdFZhclJlZixcbiAgICBhc3RWYWx1ZSxcbiAgICBhc3RGdW5jdGlvbixcbiAgICBhc3RBbm9ueW1vdXNGdW5jdGlvbixcbiAgICBhc3RBcnJvd0Z1bmN0aW9uLFxuICAgIGFzdElmLFxuICAgIGFzdENvbmRpdGlvbmFsLFxuICAgIGFzdEJpbkV4cCxcbiAgICBhc3RMb2dpY2FsRXhwLFxuICAgIGFzdEJsb2NrLFxuICAgIGFzdE1hdGNoT2JqZWN0LFxuICAgIGFzdEV4cHJlc3Npb24sXG4gICAgYXN0QXNzaWduLFxuICAgIGFzdEFkZE1lbWJlcixcbiAgICBhc3RNZW1iZXIsXG4gICAgYXN0UHVzaEluQm9keSxcbiAgICBhc3RUaHJvdyxcbiAgICBhc3ROb3QsXG4gICAgYXN0UmV0dXJuLFxuICAgIGFzdExpdGVyYWwsXG4gICAgYXN0UGFyYW1zLFxuICAgIGFzdEFycmF5QWNjZXNzLFxuICAgIGFzdFRvQ29kZVxufTsiXX0=