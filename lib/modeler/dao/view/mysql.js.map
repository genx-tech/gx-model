{"version":3,"file":"mysql.js","names":["AST","require","module","exports","dbService","viewName","viewInfo","spName","getViewSPName","astVarDeclare","astAwait","astValue","params","map","p","astVarRef","name"],"sources":["../../../../src/modeler/dao/view/mysql.js"],"sourcesContent":["\"use strict\";\n\nconst AST = require('../../util/ast.js');\n\nmodule.exports = function (dbService, viewName, viewInfo) {\n    let spName = dbService.getViewSPName(viewName);\n    \n    return [\n        AST.astVarDeclare('viewData',\n            AST.astAwait('this.db.service.query', [AST.astValue('call `' + spName + '`(??);'), AST.astValue(viewInfo.params.map(p => AST.astVarRef(p.name)))]),\n            false, false, 'call stored procedure to get view data'\n        )\n    ];\n};"],"mappings":"AAAA;;;;AAEA,MAAMA,GAAG,GAAGC,OAAO,CAAC,mBAAD,CAAnB;;AAEAC,MAAM,CAACC,OAAP,GAAiB,UAAUC,SAAV,EAAqBC,QAArB,EAA+BC,QAA/B,EAAyC;EACtD,IAAIC,MAAM,GAAGH,SAAS,CAACI,aAAV,CAAwBH,QAAxB,CAAb;EAEA,OAAO,CACHL,GAAG,CAACS,aAAJ,CAAkB,UAAlB,EACIT,GAAG,CAACU,QAAJ,CAAa,uBAAb,EAAsC,CAACV,GAAG,CAACW,QAAJ,CAAa,WAAWJ,MAAX,GAAoB,QAAjC,CAAD,EAA6CP,GAAG,CAACW,QAAJ,CAAaL,QAAQ,CAACM,MAAT,CAAgBC,GAAhB,CAAoBC,CAAC,IAAId,GAAG,CAACe,SAAJ,CAAcD,CAAC,CAACE,IAAhB,CAAzB,CAAb,CAA7C,CAAtC,CADJ,EAEI,KAFJ,EAEW,KAFX,EAEkB,wCAFlB,CADG,CAAP;AAMH,CATD"}