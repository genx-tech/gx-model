{"version":3,"file":"reverse.js","names":["path","require","throwIfFileNotExist","getSchemaConnectors","getDateNamedDir","module","exports","app","context","log","name","schemaName","option","override","schemaToConnector","schemas","connector","basePath","join","manifestPath","reverseOutput","undefined","ReserveEngineering","driver","modeler","reverse_"],"sources":["../../src/commands/reverse.js"],"sourcesContent":["const path = require('path');\nconst { throwIfFileNotExist, getSchemaConnectors, getDateNamedDir } = require('../utils/helpers');\n\n/**\n * Build database scripts and entity models from oolong files.\n * @param {ServiceContainer} app\n * @param {object} context \n * @property {string} context.gemlPath\n * @property {string} context.modelPath         \n * @property {string} context.scriptPath\n * @property {string} context.manifestPath\n * @property {bool} context.useJsonSource\n * @property {bool} context.saveIntermediate\n * @property {object} context.schemas   \n * @returns {Promise}\n */\nmodule.exports = async (app, context) => {\n    app.log('verbose', `${app.name} reverse`);\n\n    let schemaName = app.option('schema');\n    let override = app.option('override');\n\n    let schemaToConnector = getSchemaConnectors(app, context.schemas);\n    let connector = schemaToConnector[schemaName];\n\n    let basePath = path.join(context.manifestPath, 'reverse');\n\n    let reverseOutput = getDateNamedDir(basePath, undefined, override);   \n\n    const ReserveEngineering = require(`../modeler/database/${connector.driver}/ReverseEngineering`);\n    let modeler = new ReserveEngineering(app, connector);\n\n    await modeler.reverse_(reverseOutput);\n};\n"],"mappings":";;;;AAAA,MAAMA,IAAI,GAAGC,OAAO,CAAC,MAAD,CAApB;;AACA,MAAM;EAAEC,mBAAF;EAAuBC,mBAAvB;EAA4CC;AAA5C,IAAgEH,OAAO,CAAC,kBAAD,CAA7E;;AAeAI,MAAM,CAACC,OAAP,GAAiB,OAAOC,GAAP,EAAYC,OAAZ,KAAwB;EACrCD,GAAG,CAACE,GAAJ,CAAQ,SAAR,EAAoB,GAAEF,GAAG,CAACG,IAAK,UAA/B;EAEA,IAAIC,UAAU,GAAGJ,GAAG,CAACK,MAAJ,CAAW,QAAX,CAAjB;EACA,IAAIC,QAAQ,GAAGN,GAAG,CAACK,MAAJ,CAAW,UAAX,CAAf;EAEA,IAAIE,iBAAiB,GAAGX,mBAAmB,CAACI,GAAD,EAAMC,OAAO,CAACO,OAAd,CAA3C;EACA,IAAIC,SAAS,GAAGF,iBAAiB,CAACH,UAAD,CAAjC;EAEA,IAAIM,QAAQ,GAAGjB,IAAI,CAACkB,IAAL,CAAUV,OAAO,CAACW,YAAlB,EAAgC,SAAhC,CAAf;EAEA,IAAIC,aAAa,GAAGhB,eAAe,CAACa,QAAD,EAAWI,SAAX,EAAsBR,QAAtB,CAAnC;;EAEA,MAAMS,kBAAkB,GAAGrB,OAAO,CAAE,uBAAsBe,SAAS,CAACO,MAAO,qBAAzC,CAAlC;;EACA,IAAIC,OAAO,GAAG,IAAIF,kBAAJ,CAAuBf,GAAvB,EAA4BS,SAA5B,CAAd;EAEA,MAAMQ,OAAO,CAACC,QAAR,CAAiBL,aAAjB,CAAN;AACH,CAjBD"}