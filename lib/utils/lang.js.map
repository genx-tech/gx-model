{"version":3,"file":"lang.js","names":["_","require","SupportedDrivers","JsPrimitiveTypes","Set","mergeCondition","condition1","condition2","operator","isEmpty","exports","isNothing","v","isNil","isNaN","isPrimitive","has","isQuoted","s","startsWith","length","isQuotedWith","q","makeDataSourceName","driver","schema","extractDriverAndConnectorName","id","split","Object","freeze"],"sources":["../../src/utils/lang.js"],"sourcesContent":["\"use strict\";\n\nconst { _ } = require('@genx/july');\n\nconst SupportedDrivers = [ 'mysql', 'mongodb', 'rabbitmq' ];\nconst JsPrimitiveTypes = new Set([ 'number', 'boolean', 'string', 'symbol', 'undefined' ]);\n\n/**\n * Merge two query conditions using given operator.\n * @param {*} condition1 \n * @param {*} condition2 \n * @param {*} operator \n * @returns {object}\n */\nfunction mergeCondition(condition1, condition2, operator = '$and') {        \n    if (_.isEmpty(condition1)) {\n        return condition2;\n    }\n\n    if (_.isEmpty(condition2)) {\n        return condition1;\n    }\n\n    return { [operator]: [ condition1, condition2 ] };\n}\n\nexports.isNothing = v => _.isNil(v) || _.isNaN(v);\nexports.isPrimitive = v => JsPrimitiveTypes.has(typeof v);\nexports.isQuoted = s => (s.startsWith(\"'\") || s.startsWith('\"')) && s[0] === s[s.length-1];\nexports.isQuotedWith = (s, q) => (s.startsWith(q) && s[0] === s[s.length-1]);\nexports.makeDataSourceName = (driver, schema) => (driver + '.' + schema);\nexports.extractDriverAndConnectorName = id => id.split('.');\nexports.mergeCondition = mergeCondition;\nexports.SupportedDrivers = Object.freeze(SupportedDrivers);\n "],"mappings":"AAAA;;;;AAEA,MAAM;EAAEA;AAAF,IAAQC,OAAO,CAAC,YAAD,CAArB;;AAEA,MAAMC,gBAAgB,GAAG,CAAE,OAAF,EAAW,SAAX,EAAsB,UAAtB,CAAzB;AACA,MAAMC,gBAAgB,GAAG,IAAIC,GAAJ,CAAQ,CAAE,QAAF,EAAY,SAAZ,EAAuB,QAAvB,EAAiC,QAAjC,EAA2C,WAA3C,CAAR,CAAzB;;AASA,SAASC,cAAT,CAAwBC,UAAxB,EAAoCC,UAApC,EAAgDC,QAAQ,GAAG,MAA3D,EAAmE;EAC/D,IAAIR,CAAC,CAACS,OAAF,CAAUH,UAAV,CAAJ,EAA2B;IACvB,OAAOC,UAAP;EACH;;EAED,IAAIP,CAAC,CAACS,OAAF,CAAUF,UAAV,CAAJ,EAA2B;IACvB,OAAOD,UAAP;EACH;;EAED,OAAO;IAAE,CAACE,QAAD,GAAY,CAAEF,UAAF,EAAcC,UAAd;EAAd,CAAP;AACH;;AAEDG,OAAO,CAACC,SAAR,GAAoBC,CAAC,IAAIZ,CAAC,CAACa,KAAF,CAAQD,CAAR,KAAcZ,CAAC,CAACc,KAAF,CAAQF,CAAR,CAAvC;;AACAF,OAAO,CAACK,WAAR,GAAsBH,CAAC,IAAIT,gBAAgB,CAACa,GAAjB,CAAqB,OAAOJ,CAA5B,CAA3B;;AACAF,OAAO,CAACO,QAAR,GAAmBC,CAAC,IAAI,CAACA,CAAC,CAACC,UAAF,CAAa,GAAb,KAAqBD,CAAC,CAACC,UAAF,CAAa,GAAb,CAAtB,KAA4CD,CAAC,CAAC,CAAD,CAAD,KAASA,CAAC,CAACA,CAAC,CAACE,MAAF,GAAS,CAAV,CAA9E;;AACAV,OAAO,CAACW,YAAR,GAAuB,CAACH,CAAD,EAAII,CAAJ,KAAWJ,CAAC,CAACC,UAAF,CAAaG,CAAb,KAAmBJ,CAAC,CAAC,CAAD,CAAD,KAASA,CAAC,CAACA,CAAC,CAACE,MAAF,GAAS,CAAV,CAA/D;;AACAV,OAAO,CAACa,kBAAR,GAA6B,CAACC,MAAD,EAASC,MAAT,KAAqBD,MAAM,GAAG,GAAT,GAAeC,MAAjE;;AACAf,OAAO,CAACgB,6BAAR,GAAwCC,EAAE,IAAIA,EAAE,CAACC,KAAH,CAAS,GAAT,CAA9C;;AACAlB,OAAO,CAACL,cAAR,GAAyBA,cAAzB;AACAK,OAAO,CAACR,gBAAR,GAA2B2B,MAAM,CAACC,MAAP,CAAc5B,gBAAd,CAA3B"}